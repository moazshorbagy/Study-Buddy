<!DOCTYPE html>


<html style="height:100%;">

<head>
    <meta charset="utf-8">
    <title> Study Buddy|Tools Insertion </title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/style.css">
    <script>
        //Checking if the account is logged in
            if(sessionStorage.token==null){
               alert('You are not logged in');
               window.location.href="Login.html";
            }
    </script>

</head>
<body>

    <header id="head2">
        <div class="container">
            <div id="branding">
                <h1>
                    Tool Giveaway
                </h1>
            </div>
            <nav >
               
                <a href="Home.html">HOME</a>

                <a href="new 4.html">ABOUT US </a>
            </nav>

        </div>

    </header>
    <div id="ins">  
        
        <fieldset>
            <legend>Tool Upload</legend>
            <form name="sform" id="sform">
                
                Tool Type: <span style="color:red; font-size:15px;" id="ToolType"></span> <br/>
                <input name="author"; type="text" class="intext" id="Type"><br/>
                Manufacturer: <span style="color:red; font-size:15px;" id="Manufacturer"></span> <br/>
                <input name="edition"; type="text" class="intext" id="Manu"><br/>
               <!-- Book Image:<br/>
                <input name="bookImage"; type="file" style="font-size:15px;" ><br/>-->
                Duration: <span style="font-size:15px;font-style:italic; margin:0;">(if you wish to donate the tool put 0 in duration)</span></br>
                <input name="duration"; type="text" class="intext" placeholder="months"><br/>

                <input name="submit"; id="submit" type="submit" value="UPLOAD" style="font-size:15px;" sty><br/>
            </form>
        </fieldset>

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        
           $('#submit').on('click',function(ev){
            ev.preventDefault();
            if(document.getElementById("type").value==""){
                   document.getElementById("Tooltype").innerHTML=" Type Required";
               }
               else {
                document.getElementById("ToolType").innerHTML="";
               }
                if(document.getElementById("Manufacturer").value==""){
                   document.getElementById("Manufacturer").innerHTML="Manufacturer Required";
               }
               else{
                document.getElementById("Manufacturer").innerHTML="";
               }
                
            
               if(!(document.getElementById("type").value=="" || document.getElementById("manufacturer").value=="" ))
                {
                    $.ajax({
                    
                    type:"POST", 
                    url :'http://localhost:3000/api/insertBook',
                    data: $('#sform').serialize() ,
                    headers: {
                        "x-access-token": sessionStorage.getItem('token')
                    },
                    success:function(response){
                        console.log(response);
                        
                            if(!(response.Error)){
                            alert('Tool was successfully uploaded');
                            window.location.href="Tools.html"; 
                            
                        }
                        
                    },
                    error: function(){
                        console.log("Error in connection");
                        
                    },
                    
                    
                });
                    }
                }
           )
        
           
    </script>

</body>
</html>
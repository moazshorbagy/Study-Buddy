<!DOCTYPE html>


<html style="height:100%;">

<head>
    <meta charset="utf-8">
    <title> Study Buddy|Sign up </title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/style.css">
    <script>
    function CheckForBlank(){
               if(document.getElementById("Username").value==""){
                   alert('Please enter your username');
                   return false;
               }
            }
    </script>
    

</head>
<body>

    <header id="head1">
        <div class="container">
            
                <h1 style="text-align:center">
                    Sign Up
                </h1>
                
            
        </div>

    </header>

    <div id="signup">

        <form id="sform" name="sform"   >

        Username: <span style="color:red; font-size:15px;" id="uname"></span> <br>
         <input name="username" id="Username" type="text" > <br/>

        Password: <span style="color:red; font-size:15px;" id="upass"></span> <br/>
         <input name="password" id="Password" type="Password"> <br/>
        
         Department: <br/>
                <select name="department" id="Department"   style="font-size:15px">
                    <option value="CCE">CCE</option>
                    <option value="CCEE">CCEE</option>
                    <option value="CCEC">CCEC</option>
                    <option value="EEE">EEE</option>
                    <option value="AET">AET</option>
                    <option value="MDE">MDE</option>
                    <option value="STE">STE</option>
                    <option value="CEM">CEM</option>
                </select> <br/>
        
        Email: <span style="color:red; font-size:15px;" id="uemail"></span> <br>
        <input name="email" id="Email" type="email" > <br>

        Phone Number: <br/>
        <input name="phone" id="Phone" type="tel" placeholder="(Optional)"> <br/>

        Year: <br/>
        <input name="year" type="radio" value="1" checked >1
        <input name="year" type="radio" value="2">2
        <input name="year" type="radio" value="3">3
        <input name="year" type="radio" value="4">4
        <input name="year" type="radio" value="5">5
        <input name="year" type="radio" value="Graduate">Graduate
              
         <br/><br/>
        
         <input name="submit" id="submit" type="submit" value="Sign up" style="font-size: 15px"  >
                <p id="demo"></p>
        </form>
      
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
           
       
           /* document.getElementById("sform").addEventListener("submit",function(event){

                 event.preventDefault();

           
             var e=document.getElementById("Department");
             var depar= e.options[e.selectedIndex].text;
             var Years = document.getElementsByName('Year');
             var Year_value;
                for(var i = 0; i < Years.length; i++){
                    if(Years[i].checked){
                        Year_value = Years[i].value;
                    }
                }
                            

               

            
               };*/

              
            
               $('#submit').on('click',function(ev){
                ev.preventDefault();
                if(document.getElementById("Username").value=="" || document.getElementById("Password").value=="" || document.getElementById("Email").value=="" ){
               if(document.getElementById("Username").value==""){
                   document.getElementById("uname").innerHTML="Username Required";
               }
               else {
                document.getElementById("uname").innerHTML="";
               }
                if(document.getElementById("Password").value==""){
                   document.getElementById("upass").innerHTML="Password Required";
               }
               else {
                document.getElementById("upass").innerHTML="";
               }
                if(document.getElementById("Email").value==""){
                   document.getElementById("uemail").innerHTML="Email Required";
                   
               }
               else {
                document.getElementById("uemail").innerHTML="";
               }
            }
               else{
              
                
               
            $.ajax({
               
               type:"POST", 
               url :'http://localhost:3000/api/register',
               data: $('#sform').serialize(), 
               success:function(response){
                   console.log(response);
                if(!(response.Error)){
                    alert('Congratulations, You have successfully joined our Study Buddy Family')
                    window.location.href="Login.html"; 
                    
                }
                   alert('This email already exists');
               },
               error: function(){
                   console.log("Error in connection");
               },
             
              
           });
               }
            });
               $('#submit').on('click',function(ev){
                
           
        }
            )
           
    
        </script>
    
    </div>
    
</body>
</html>